<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Submission</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Event Form</h1>
    </header>

    <main>
        <section class="form-container">
            <form id="eventForm">
                <label for="title">Event Title:</label>
                <input type="text" id="title" required><br><br>

                <label for="date">Event Date:</label>
                <input type="date" id="date" required><br><br>

                <label for="time">Event Time:</label>
                <input type="time" id="time" required><br><br>

                <label for="location">Event Location:</label>
                <input type="text" id="location" required><br><br>

                <label for="description">Event Description:</label>
                <textarea id="description" required></textarea><br><br>

                <label for="tickets">Number of Tickets:</label>
                <input type="number" id="tickets" required><br><br>

                <label for="price">Ticket Price:</label>
                <input type="number" id="price" required step="0.01"><br><br>

                <button type="submit">Submit</button>
            </form>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Event Manager</p>
    </footer>

    <script>
        const apiKey = "AIzaSyCUkF0UxSM1vYwamXGJSEUYtMtRysAj4D4";
        const projectId = "bearcat-event-manager";
        const collectionName = "eventsCollection";

        const form = document.getElementById("eventForm");

        // Add a document to Firestore using the REST API
        async function addDocument(data) {
            const url = `https://firestore.googleapis.com/v1/projects/${projectId}/databases/(default)/documents/${collectionName}?key=${apiKey}`;
            const response = await fetch(url, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify({
                    fields: {
                        title: { stringValue: data.title },
                        date: { stringValue: data.date },
                        time: { stringValue: data.time },
                        location: { stringValue: data.location },
                        description: { stringValue: data.description },
                        tickets: { integerValue: data.tickets },
                        price: { doubleValue: data.price }
                    }
                }),
            });

            if (response.ok) {
                alert("Event submitted successfully!");
            } else {
                alert("Error submitting event.");
                console.error("Error:", await response.text());
            }
        }

        // Handle form submission
        form.addEventListener("submit", (e) => {
            e.preventDefault();
            const data = {
                title: document.getElementById("title").value,
                date: document.getElementById("date").value,
                time: document.getElementById("time").value,
                location: document.getElementById("location").value,
                description: document.getElementById("description").value,
                tickets: parseInt(document.getElementById("tickets").value, 10),
                price: parseFloat(document.getElementById("price").value),
            };

            addDocument(data); // Add the form data to Firestore
            form.reset(); // Reset the form
        });
    </script>
</body>
</html>
